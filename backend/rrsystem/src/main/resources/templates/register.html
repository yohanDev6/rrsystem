<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

    <!--Google fonts-->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap" rel="stylesheet">

    <link rel="stylesheet" th:href="@{/css/default.css}" />
    <link rel="stylesheet" th:href="@{/css/auth.css}">
</head>
<body>
	<header>
		<h1>Room Reservation System</h1>
	</header>
	<main>
		<section>
			<h1>Register</h1>
		    <form id="registerForm">
				<div class="field">
					<label for="name">Name</label>
			        <input type="text" id="name" name="name" required autofocus>
				</div>
				<div class="field">
					<label for="email">Email</label>
			        <input type="email" id="email" name="email" required>
				</div>
		        <div class="field">
					<label for="password">Password</label>
			        <input type="password" id="password" name="password" required>
				</div>
				<button type="submit" id="loginButton">Register</button>
		    </form>
			<div class="link">
				<a href="/login">Entrar</a>
			</div>
		</section>
	</main>
	<footer>
		<p>All rights reserved &copy</p>
		<p>Pedro Yohan Mendon√ßa da Silva <a href="mailto:yohan.dev6@gmail.com">yohan.dev6@gmail.com</a></p>
	</footer>
  	<script>
	    document.getElementById('registerForm').onsubmit = async (e) => {
	        e.preventDefault();
			const name = document.getElementById('name').value;
			const email = document.getElementById('email').value;
			const password = document.getElementById('password').value;
 
			const loginButton = document.getElementById('loginButton');
			loginButton.disabled = true;
			
			try {
				const response = await fetch('/clients', {
		            method: 'POST',
		            headers: {
						'Content-Type': 'application/json'
					},
					body: JSON.stringify({ name, email, password })
		        });

		        if (response.ok) {
		            alert('Register success!');
		            window.location.href = '/login';
		        } else {
					const result = await response.json();
		            alert('Error: ', result);
		        }
			} catch (err) {
				alert('Error: ', err);
			} finally {
				loginButton.disabled = false;
			}
	        
	    };
	</script>
</body>
</html>